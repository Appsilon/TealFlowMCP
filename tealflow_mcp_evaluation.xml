<?xml version="1.0" encoding="UTF-8"?>
<evaluation>
  <description>
    Evaluation questions for the Teal Flow MCP Server.
    These questions test whether LLMs can effectively use the MCP server tools to
    discover Teal modules, understand their requirements, check compatibility,
    and generate appropriate code for clinical trial data analysis.
  </description>

  <qa_pair>
    <question>Which clinical module is specifically designed for creating Kaplan-Meier survival plots, and what are the exact names of the two required datasets it needs?</question>
    <answer>tm_g_km requires ADSL and ADTTE</answer>
    <reasoning>
      This tests:
      1. Ability to search for modules by analysis type ("Kaplan-Meier")
      2. Ability to retrieve module details to confirm the correct module
      3. Ability to identify required datasets
      Requires: tealflow_search_modules_by_analysis, tealflow_get_module_details
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>How many different clinical modules are specifically designed for working with Adverse Events data (ADAE dataset)? Count only modules that explicitly require ADAE.</question>
    <answer>9</answer>
    <reasoning>
      This tests:
      1. Ability to list clinical modules
      2. Ability to filter by dataset requirements
      3. Counting and verification
      Requires: tealflow_list_modules with filtering logic
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>For the Cox regression table module (tm_t_coxreg), what is the name of the required parameter that specifies the covariate variables for the analysis model?</question>
    <answer>cov_var</answer>
    <reasoning>
      This tests:
      1. Ability to get module details
      2. Ability to distinguish required vs optional parameters
      3. Understanding of parameter purposes
      Requires: tealflow_get_module_details
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>If you only have the datasets ADSL and ADAE available, which of these modules CAN you use: tm_g_km, tm_t_events, tm_g_forest_tte, tm_t_coxreg? List only the compatible module names separated by commas.</question>
    <answer>tm_t_events</answer>
    <reasoning>
      This tests:
      1. Ability to check dataset requirements for multiple modules
      2. Understanding of dataset compatibility
      3. Logical filtering based on availability
      Requires: tealflow_check_dataset_requirements for each module
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>What is the full name (not abbreviation) of the ADTTE dataset used in time-to-event analysis?</question>
    <answer>Time-to-Event Analysis Dataset</answer>
    <reasoning>
      This tests:
      1. Ability to list and understand datasets
      2. Reading comprehension of dataset information
      Requires: tealflow_list_datasets
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>How many total modules are available across both teal.modules.clinical and teal.modules.general packages? Provide just the number.</question>
    <answer>53</answer>
    <reasoning>
      This tests:
      1. Ability to list all modules from both packages
      2. Counting modules from different sources
      3. Aggregation of results
      Note: 37 clinical + 16 general = 53 total
      Requires: tealflow_list_modules with package="all"
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>Which clinical module would you use to create a forest plot specifically for time-to-event data? Provide the exact module name.</question>
    <answer>tm_g_forest_tte</answer>
    <reasoning>
      This tests:
      1. Search by analysis type ("forest plot time-to-event")
      2. Understanding module naming conventions
      3. Distinguishing between similar modules (forest_rsp vs forest_tte)
      Requires: tealflow_search_modules_by_analysis
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>The ADSL dataset serves what role in the clinical modules architecture - is it primarily used as a "Parent dataset" or an "Analysis dataset"?</question>
    <answer>Parent dataset</answer>
    <reasoning>
      This tests:
      1. Understanding dataset relationships
      2. Reading dataset type information
      Requires: tealflow_list_datasets
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>For survival analysis using time-to-event data, name all clinical modules (separated by commas) that require both ADSL and ADTTE datasets. Use exact module names.</question>
    <answer>tm_g_forest_tte, tm_g_km, tm_t_coxreg, tm_t_tte</answer>
    <reasoning>
      This tests:
      1. Search by analysis type and dataset combination
      2. Filtering modules by multiple criteria
      3. Complete enumeration of matching modules
      Requires: tealflow_list_modules and filtering by dataset requirements
    </reasoning>
  </qa_pair>

  <qa_pair>
    <question>In the generated R code for the tm_g_km module, what parameter is used to specify the grouping variable for the Kaplan-Meier curves? Provide the exact parameter name.</question>
    <answer>arm_var</answer>
    <reasoning>
      This tests:
      1. Code generation capability
      2. Understanding of generated code structure
      3. Identifying key parameters from code
      Requires: tealflow_generate_module_code for tm_g_km
    </reasoning>
  </qa_pair>

  <metadata>
    <total_questions>10</total_questions>
    <coverage>
      <tool name="tealflow_list_modules">5 questions</tool>
      <tool name="tealflow_get_module_details">4 questions</tool>
      <tool name="tealflow_search_modules_by_analysis">4 questions</tool>
      <tool name="tealflow_check_dataset_requirements">2 questions</tool>
      <tool name="tealflow_list_datasets">3 questions</tool>
      <tool name="tealflow_generate_module_code">1 question</tool>
    </coverage>
    <difficulty_levels>
      <simple>3 questions (single tool call)</simple>
      <moderate>5 questions (2-3 tool calls or filtering)</moderate>
      <complex>2 questions (multiple tool calls with aggregation)</complex>
    </difficulty_levels>
  </metadata>
</evaluation>
